var G5_Woocommerce=window.G5_Woocommerce||{};!function(S){"use strict";window.G5_Woocommerce=G5_Woocommerce;var p=S("body"),e=p.hasClass("gf-lazy-load"),o=p.hasClass("rtl"),s=!1;G5_Woocommerce={init:function(){this.initSwitchLayout(),this.processTabs(),this.updateAjaxPosts(),this.addToWishlist(),this.addToCart(),this.quickView(),this.addCartQuantity(),this.initFilterBellow(),this.initFilterAjax(),this.initPerfectSroll();var t=S("#single-product-image");0<t.length&&G5_Woocommerce.singleProductImage(t),setTimeout(function(){G5_Woocommerce.setCartScrollBar()},500),this.saleCountdown(),this.yith_wcan_ajax_filtered(),this.events()},initFilterAjax:function(){function a(e){var a=e.closest('[data-items-paging="load-more"]').length?"load_more":e.closest('[data-items-paging="infinite-scroll"]').length?"infinitive":"reload",i=!!(e.closest('[data-items-paging="load-more"]').length||e.closest('[data-items-paging="infinite-scroll"]').length||e.closest('[data-items-paging="pagination-ajax"]').length||e.closest('[data-items-paging="next-prev"]').length),o=!(!e.closest("[data-items-cate]").length&&!e.closest(".gf-product-category-filter").length),n=S("[data-archive-content][data-items-wrapper]");if(o&&e.parent().hasClass("active"))return!1;G5_Woocommerce.showLoading(n,a);var r=e.attr("href"),t=G5_Core.cache.getCache(r,"archive_shop");s||(s=!0,""!==t?(G5_Woocommerce.onSuccess(n,e,t,r,a,i,o),s=!1):S.ajax({url:r,data:{shop_load_type:"ajax"},dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},method:"POST",error:function(t){console.log(t.error),s=!1,G5_Core.loading_content.hideLoading(n)},success:function(t){G5_Woocommerce.onSuccess(n,e,t,r,a,i,o),G5_Core.cache.addCache(r,t,"archive_shop"),s=!1}}))}S(document).on("click",".clear-filter-wrap a, .gf-price-filter a, .gf-product-sorting a, .gf-attr-filter-content a, .gf-product-category-filter a",function(t){t.preventDefault(),a(S(this))}),S(document).on("archive-product-ajax",function(t,e){a(S(e))})},onSuccess:function(e,t,a,i,o,n,r){var s=S("<div>"+a+"</div>"),c=e.find(".gsf-catalog-filter"),l=e.find(".gf-shop-switch-layout"),d=c.find(".gf-table-cell"),u=s.find(".gsf-catalog-filter").find(".gf-table-cell"),f=c.find("#gf-filter-content"),m=s.find(".gsf-catalog-filter").find("#gf-filter-content"),p=S("#canvas-filter-wrapper").find(".canvas-sidebar-inner"),g=s.find("#canvas-filter-wrapper").find(".canvas-sidebar-inner"),h=c.find(".clear-filter-wrap"),v=s.find(".gsf-catalog-filter").find(".clear-filter-wrap"),_=s.find("[data-items-container]"),w=s.find("#ajax-page-title").text(),C=e.find("[data-items-container]"),y=C.hasClass("isotope"),b=S(".gf-page-title h1"),x=0<e.find(".gf_animate_when_almost_visible").length,G=e.find("[data-items-paging]"),k=s.find("[data-items-paging]");if(_.length){if(s.find(".gf-shop-switch-layout").html(l.html()),x||_.find("article").css("opacity",0),"reload"===o?(w.length&&r&&(document.title=w,b.length&&b.text(w)),d.html(u.html()),n||(f.html(m.html()),p.length&&g.length&&(p.html(g.html()),p.perfectScrollbar("update"))),G5_Woocommerce.initPerfectSroll(),C.html(_.html())):C.append(_.html()),n||h.length&&v.length&&h.html(v.html()),r){e.find("[data-items-cate]").find("li.active").removeClass("active");var W=t.attr("href");e.find('a[href="'+W+'"]').parent().addClass("active")}e.imagesLoaded({background:!0},function(){if(y){var t=C.data("isotope-options");void 0!==t&&("infinitive"!==o?(void 0!==t.masonry&&void 0!==t.masonry.columnWidth&&".gsf-col-base"===t.masonry.columnWidth&&C.append('<article class="gsf-col-base"></article>'),C.isotope("reloadItems").isotope()):C.isotope("appended",_.html()),G5_Core.isotope.layout(C),void 0!==t.masonry&&void 0!==t.masonry.columnWidth&&".gsf-col-base"===t.masonry.columnWidth&&S(window).trigger("resize"))}G5_Core.loading_content.hideLoading(e),x?new G5_Core_Animation(e):C.find("article").animate({opacity:1},500,"easeInQuad"),G5_Core.lazyLoad.init(e),"reload"===o&&G5_Core.util.setPushState(i),G5_Core.off_canvas.init(),G5_Woocommerce.widgetSliderInit(),G.length?k.length?G.html(k.html()):G.html(""):k.length&&e.append(k),G5_Core.util.tooltip(),S(".woocommerce-ordering").off("change").on("change","select.orderby",function(){S(this).closest("form").submit()})})}else if(G5_Core.loading_content.hideLoading(e),s.find(".woocommerce-info").length){var T=s.find("article").addClass("col-sm-12");C.html(T)}},initPerfectSroll:function(){S(".gf-product-category-filter-wrap .gf-product-category-filter").perfectScrollbar({wheelSpeed:.5,suppressScrollX:!0})},widgetSliderInit:function(){S(".price_slider").each(function(){var t=S(this),a=S(this).closest(".price_slider_wrapper"),e=a.find("#min_price").data("min"),i=a.find("#max_price").data("max"),o=parseInt(a.find("#min_price").val(),10),n=parseInt(a.find("#max_price").val(),10);isNaN(o)&&(o=parseInt(e,10)),isNaN(n)&&(n=parseInt(i,10)),S("input#min_price, input#max_price",a).hide(),S(".price_slider, .price_label",a).show(),t.slider({range:!0,animate:!0,min:e,max:i,values:[o,n],create:function(){a.find("#min_price").val(o),a.find("#max_price").val(n),S(document.body).trigger("price_slider_create",[o,n])},slide:function(t,e){a.find("#min_price").val(e.values[0]),a.find("#max_price").val(e.values[1]),S(document.body).trigger("price_slider_slide",[e.values[0],e.values[1]])},change:function(t,e){S(document.body).trigger("price_slider_change",[e.values[0],e.values[1]])}})})},showLoading:function(t,e){var a=t.find("[data-items-container]"),i=t.outerHeight(),o=t.children(".gsf-content-loading"),n=t.offset().top-G5_Core.util.getScrollOffset(),r=S(".header-sticky"),s=a.offset().top-t.offset().top,c=0<t.find(".gf_animate_when_almost_visible").length;if(r.length&&(n-=80),"reload"===e){s+=100;var l=(document.documentElement.scrollTop||document.body.scrollTop)-n,d=Math.abs(l)/2;d<800&&(d=800),S("html,body").animate({scrollTop:n},d,"easeInOutCubic")}else s=t.height(),"load_more"===e&&(s-=100);o.css("top",s),t.css("height",i).addClass("loading"),"reload"===e&&(c?a.find(".gf_animate_when_almost_visible").addClass("zoom-reverse"):a.find(t.find("article")).animate({opacity:0},500,"easeOutQuad"))},initSwitchLayout:function(){var n=!1;S(document).on("click",".gf-shop-switch-layout li a",function(t){t.preventDefault();var e=S(this),a=e.data("layout"),i=e.closest(".gsf-product-wrap").find('[data-items-container="true"]'),o=e.closest(".gsf-product-wrap").find(".gf-paging");e.closest("li").hasClass("active")||n||(n=!0,e.closest(".gf-shop-switch-layout").children("li").removeClass("active"),e.closest("li").addClass("active"),o.fadeOut(),e.waypoint(function(){S(this.element).addClass("wpb_start_animation animated"),this.destroy()}),i.fadeOut(function(){"list"===a?i.removeClass("layout-grid").addClass("layout-list"):i.removeClass("layout-list").addClass("layout-grid"),G5_Core.util.tooltip(),i.fadeIn("slow"),o.fadeIn("slow")}),S.cookie("product_layout",a,{expires:15}),n=!1)})},processTabs:function(){S(".gsf-pretty-tabs").each(function(){var t,e,a,i=S(this);(0<i.closest(".custom-product-row").length||0<i.closest(".custom-product-heading-row").length)&&0<(t=(a=0<i.closest(".custom-product-row").length?i.closest(".custom-product-row"):i.closest(".custom-product-heading-row")).find(".gf-heading")).length&&(e=t.find(".heading-title").outerWidth(),o?a.hasClass("heading-right")?i.css("margin-left",e+30):i.css("margin-right",e+30):a.hasClass("heading-right")?i.css("margin-right",e+30):i.css("margin-left",e+30),i.gsfPrettyTabs())})},updateAjaxPosts:function(){var i=this;p.on("gf_pagination_ajax_success",function(t,e,a){"product"===e.settings.post_type&&(i.updateResultCount(S(t.target),e,a),S(t.target).imagesLoaded({background:!0},function(){S(t.target).trigger("gf_update_ajax_product",[e]),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown()}))})},updateResultCount:function(t,e,a){var i=t.find(".woocommerce-result-count"),o=a.find(".woocommerce-result-count");0!==i.length&&0!==o.length&&i.html(o.html())},initFilterBellow:function(){S(document).on("click",".gf-filter-bellow",function(){S("#gf-filter-content").slideToggle("500"),G5_Woocommerce.initPerfectSroll()}),S(".gf-fiter-type-select").length&&S(".gf-fiter-type-select .gf-attr-filter-content").slideUp("100"),S(".gf-product-category-filter-select").length&&S(".gf-product-category-filter-select .gf-product-category-filter").slideUp("100"),S(document).on("click",".gf-fiter-type-select .filter-select-open",function(t){var e=S(t.target).closest(".gf-fiter-type-select").toggleClass("opened");e.hasClass("opened")?S(".gf-attr-filter-content",e).slideDown("500"):S(".gf-attr-filter-content",e).slideUp("fast")}),S(document).on("click",".gf-product-category-filter-select .gf-filter-open",function(t){var e=S(t.target).closest(".gf-product-category-filter-select").toggleClass("opened");e.hasClass("opened")?S(".gf-product-category-filter",e).slideDown("500"):S(".gf-product-category-filter",e).slideUp("fast")}),S(document).on("click",function(t){S(t.target).closest(".gf-fiter-type-select").length||S(".gf-fiter-type-select").removeClass("opened").find(".gf-attr-filter-content").slideUp("fast"),S(t.target).closest(".gf-product-category-filter-select").length||S(".gf-product-category-filter-select").removeClass("opened").find(".gf-product-category-filter").slideUp("fast")})},addToWishlist:function(){S(document).on("click",".add_to_wishlist",function(){var t=S(this),e=t.parent().parent();if(!e.parent().hasClass("single-product-function")){t.addClass("added-spinner");var a=e.parent().parent().parent().parent();if(void 0===a)return;a.addClass("active")}}),p.on("added_to_wishlist",function(t,e,a,i){var o=S(".added-spinner.add_to_wishlist"),n=o.parent().parent();if(!n.parent().hasClass("single-product-function")){var r=n.parent().parent().parent().parent();if(void 0===r)return;setTimeout(function(){r.removeClass("active"),o.removeClass("added-spinner")},700)}})},addToCart:function(){S(document).on("click",".add_to_cart_button",function(){var t=S(this);if(!t.hasClass("single_add_to_cart_button")&&t.is(".product_type_simple")){var e=t.closest(".product-item-wrap");if(void 0===e)return;e.addClass("active")}}),p.on("wc_cart_button_updated",function(t,e){var a=S(".header-sticky-wrapper .header-sticky"),i=S(".item-shopping-cart",a);if(!e.hasClass("single_add_to_cart_button")){var o=e.parent(),n=o.find(".added_to_cart"),r=n.text(),s=o.closest(".product-item-wrap");e.remove(),n.html('<i class="fa fa-check"></i> '+r),setTimeout(function(){o.tooltip("hide").attr("title",r).tooltip("fixTitle")},500),setTimeout(function(){G5_Woocommerce.setCartScrollBar(function(){if(0<i.length){var t=0;a.hasClass("header-hidden")&&(a.removeClass("header-hidden"),t=500),setTimeout(function(){i.addClass("show-cart"),setTimeout(function(){i.removeClass("show-cart")},2e3)},t)}})},10),setTimeout(function(){s.removeClass("active")},700)}}),p.on("removed_from_cart",function(){setTimeout(function(){G5_Woocommerce.setCartScrollBar(),S(document.body).trigger("update_checkout");var t=S('[name="update_cart"]');t.length&&t.removeAttr("disabled").trigger("click")},10)})},quickView:function(){var m=!1;S(document).on("click",".product-quick-view",function(t){if(t.preventDefault(),!m){m=!0;var e=S(this),a=e.data("product_id"),s="#popup-product-quick-view-wrapper",c=e.find("i"),l=c.attr("class"),d=e.parent().parent().parent().parent(),u=e,f=e.hasClass("prev-product")||e.hasClass("next-product");d.addClass("active"),u.addClass("active"),c.attr("class","fa fa-spinner fa-pulse"),S.ajax({url:g5plus_variable.ajax_url,data:{action:"product_quick_view",id:a},success:function(i){d.removeClass("active"),u.removeClass("active"),c.attr("class",l);var o=S(".modal-body",s);if(f){var n=S(".modal-content",s),r=S(".product-quickview-navigation",s);n.css({width:n.width(),height:n.height()}),o.fadeOut(function(){o.html(S(".modal-body",i).html()).fadeIn(),r.html(S(".product-quickview-navigation",i).html());var t=S(".quick-view-product-image",o);if(G5_Woocommerce.singleProductImage(t),void 0!==S.fn.wc_variation_form){var e=S(s).find(".variations_form"),a=S(s).find(".variations_form .variations select");e.wc_variation_form(),e.trigger("check_variations"),a.change()}S(s).addClass("in"),S(s).fadeIn(),setTimeout(function(){n.css({width:"",height:""})},1e3),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown(),S(n).find(".single-product-image-thumb a").off("click").on("click",function(t){t.preventDefault()})})}else{S(s).length&&S(s).remove(),p.append(i);var t=S(".quick-view-product-image",s);if(G5_Woocommerce.singleProductImage(t),void 0!==S.fn.wc_variation_form){var e=S(s).find(".variations_form"),a=S(s).find(".variations_form .variations select");e.wc_variation_form(),e.trigger("check_variations"),a.change()}S(s).modal(),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown(),S(s).find(".single-product-image-thumb a").off("click").on("click",function(t){t.preventDefault()})}G5_Woocommerce.addCartQuantity(),m=!1},error:function(t){m=!1}})}})},addCartQuantity:function(){S(document).off("click",".quantity .btn-number").on("click",".quantity .btn-number",function(t){t.preventDefault();var e=S(this).data("type"),a=S("input",S(this).parent()),i=parseFloat(a.val()),o=parseFloat(a.attr("max")),n=parseFloat(a.attr("min")),r=parseFloat(a.attr("step")),s=0;0<a.attr("step").indexOf(".")&&(s=a.attr("step").split(".")[1].length),isNaN(o)&&(o=100),isNaN(n)&&(n=0),isNaN(r)&&(r=1,s=0),isNaN(i)?a.val(n):("minus"==e&&(n<i&&(i=(i-r).toFixed(s),a.val(i).change()),parseFloat(a.val())<=n&&(a.val(n).change(),S(this).attr("disabled",!0))),"plus"==e&&(i<o&&(i=(i+r).toFixed(s),a.val(i).change()),parseFloat(a.val())>=o&&(a.val(o).change(),S(this).attr("disabled",!0))))}),S("input",".quantity").on("focusin",function(){S(this).data("oldValue",S(this).val())}),S("input",".quantity").on("change",function(){var t=S(this),e=parseFloat(t.attr("max")),a=parseFloat(t.attr("min")),i=parseFloat(t.val()),o=parseFloat(t.attr("step"));isNaN(e)&&(e=100),isNaN(a)&&(a=0),isNaN(o)&&(o=1);var n=S(".add_to_cart_button",S(this).parent().parent().parent());a<=i?(S(".btn-number[data-type='minus']",S(this).parent()).removeAttr("disabled"),void 0!==n&&n.attr("data-quantity",i)):(alert("Sorry, the minimum value was reached"),S(this).val(S(this).data("oldValue")),void 0!==n&&n.attr("data-quantity",S(this).data("oldValue"))),i<=e?(S(".btn-number[data-type='plus']",S(this).parent()).removeAttr("disabled"),void 0!==n&&n.attr("data-quantity",i)):(alert("Sorry, the maximum value was reached"),S(this).val(S(this).data("oldValue")),void 0!==n&&n.attr("data-quantity",S(this).data("oldValue")))})},setCartScrollBar:function(t){S(".cart_list.product_list_widget").perfectScrollbar({wheelSpeed:.5,suppressScrollX:!0}),t&&t()},singleProductImage:function(t){var r=t.find(".single-product-image-main"),s=r.find(".zoom-image"),c=r.find("img").attr("srcset",""),i=t.find(".single-product-image-thumb"),l=null;if(!i.length)return r.is(".owl-carousel")&&r.owlCarousel({items:1,nav:!0,dots:!1,loop:!1,rtl:o,autoHeight:!0,navText:['<i class="ti-angle-left"></i>','<i class="ti-angle-right"></i>'],lazyLoad:e}),!1;i.addClass("hidden"),r.is(".owl-carousel")&&r.owlCarousel({items:1,nav:!0,dots:!1,loop:!1,rtl:o,autoHeight:!0,navText:['<i class="ti-angle-left"></i>','<i class="ti-angle-right"></i>'],lazyLoad:e}).on("changed.owl.carousel",function(t){var e=t.item.index;i.find(".owl-item").removeClass("current").eq(e).addClass("current")}),i.on("initialized.owl.carousel",function(t){i.find(".owl-item").eq(0).addClass("current"),setTimeout(function(){i.removeClass("hidden")},1e3)}).owlCarousel({items:5,nav:!1,dots:!1,rtl:o,lazyLoad:e,margin:10,responsive:{992:{items:5},768:{items:3}}}).on("changed.owl.carousel",function(t){if(r.is(".owl-carousel")){var e=t.item.index;r.data("owl.carousel").to(e,200,!0)}else{var a=S(t.target).find('[data-index="'+t.item.index+'"]'),i=a.attr("data-large-image"),o=a.attr("href"),n=a.closest(".owl-item");S(t.target).find(".owl-item").removeClass("current"),n.addClass("current"),s.attr("href",o),null!=l&&clearTimeout(l),l=setTimeout(function(){c.stop().animate({opacity:0},function(){c.attr("src",i),c.imagesLoaded({src:!0},function(){c.animate({opacity:1}),G5_Core.util.magnificPopup()})})},200)}}),i.on("click",".owl-item",function(t){if(t.preventDefault(),!S(this).hasClass("current")){var e=S(this).index();if(r.is(".owl-carousel"))r.data("owl.carousel").to(e,200,!0);else{var a=S(this).find('[data-index="'+e+'"]'),i=a.attr("data-large-image"),o=a.attr("href");S(this).closest(".owl-carousel").find(".owl-item").removeClass("current"),S(this).addClass("current"),s.attr("href",o),null!=l&&clearTimeout(l),l=setTimeout(function(){c.stop().animate({opacity:0},function(){c.attr("src",i),c.imagesLoaded({src:!0},function(){c.animate({opacity:1}),G5_Core.util.magnificPopup()})})},200)}}}),S(document).on("found_variation",function(t,e){if(void 0!==e&&void 0!==e.variation_id){var a=e.variation_id;S('a[data-variation_id*="|'+a+'|"]',i).closest(".owl-item").trigger("click")}}),S(document).on("reset_data",function(t){S('a[data-index="0"]',i).closest(".owl-item").trigger("click")})},saleCountdown:function(){function a(t,e){var a=parseInt(t.offset.seconds),i=parseInt(t.offset.minutes),o=parseInt(t.offset.hours),n=parseInt(t.offset.totalDays);n<10&&(n="0"+n),o<10&&(o="0"+o),i<10&&(i="0"+i),a<10&&(a="0"+a),S(".countdown-day",e).text(n),S(".countdown-hours",e).text(o),S(".countdown-minutes",e).text(i),S(".countdown-seconds",e).text(a)}S(".product-deal-countdown").each(function(){var t=S(this).data("date-end"),e=S(this);e.countdown(t,function(t){a(t,e)}).on("update.countdown",function(t){a(t,e)})}),G5_Woocommerce.saleCountdownWidth()},saleCountdownWidth:function(){S(".product-deal-countdown").each(function(){var t=0;S(this).removeClass("small"),S(".countdown-section",S(this)).each(function(){t+=S(this).outerWidth()+parseInt(S(this).css("margin-right").replace("px",""),10)}),t>S(this).outerWidth()&&S(this).addClass("small")})},yith_wcan_ajax_filtered:function(){S(document).on("yith-wcan-ajax-filtered",function(t,e){var a=p;"undefined"!=typeof yith_wcan&&void 0!==yith_wcan.container&&(a=S(yith_wcan.container)),new G5_Core_Animation(a),a.find(".gsf-pretty-tabs").gsfPrettyTabs({more_text:g5plus_variable.pretty_tabs_more_text}),G5_Core.lazyLoad.init(),G5_Core.off_canvas.init(),G5_Core.util.tooltip()})},events:function(){var t=null;S(window).on("resize",function(){null!=t&&clearTimeout(t),t=setTimeout(function(){G5_Woocommerce.processTabs()},200)})}},S(document).ready(function(){G5_Woocommerce.init()})}(jQuery);