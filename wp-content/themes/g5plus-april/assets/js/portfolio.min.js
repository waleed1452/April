var G5_Portfolio=window.G5_Portfolio||{};!function(a){"use strict";window.G5_Portfolio=G5_Portfolio;a(window);var e=a("body"),i=e.hasClass("gf-lazy-load"),o=e.hasClass("rtl"),t=navigator.userAgent.toLowerCase();t.match(/(iphone|ipod|android|iemobile)/),t.match(/(iphone|ipod|ipad|android|iemobile)/),t.match(/(iphone|ipod|ipad)/),t.match(/(iemobile)/);G5_Portfolio={ajax_call:!1,cache:{group:"portfolio_gallery"},init:function(){this.light_box_gallery();var e=a(".gallery-layout-thumbnail");e.length&&this.single_portfolio_gallery(e)},get_gallery_cache_key:function(a){return"portfolio_gallery_"+a},light_box_gallery:function(){var e=this;a(document).on("click","[data-portfolio-gallery]",function(i){if(i.preventDefault(),!1===e.ajax_call){var o=a(this),t=o.closest(".portfolio-item-inner").addClass("active"),l=parseInt(o.data("id"),10),r=o.find("i"),s=r.attr("class"),n=e.get_gallery_cache_key(l);r.addClass("fa fa-spinner fa-pulse");var c=G5_Core.cache.getCache(n,e.cache.group);""!==c?(e.show_popup_gallery(c),r.attr("class",s),e.ajax_call=!1,setTimeout(function(){t.removeClass("active")},200)):e.ajax_call=a.ajax({url:g5plus_variable.ajax_url,data:{action:"portfolio_gallery",id:l},success:function(a){e.ajax_call=!1,r.attr("class",s),a.success&&(G5_Core.cache.addCache(n,a.data,e.cache.group),e.show_popup_gallery(a.data),setTimeout(function(){t.removeClass("active")},200))},error:function(a){console.log(a),setTimeout(function(){t.removeClass("active")},200)}})}})},show_popup_gallery:function(e){var i="video"===e.type?"iframe":"image";a.magnificPopup.open({type:i,mainClass:"mfp-zoom-in",midClick:!0,removalDelay:500,items:e.items,gallery:{enabled:!0},callbacks:{beforeOpen:function(){switch(this.st.type){case"image":this.st.image.markup=this.st.image.markup.replace("mfp-figure","mfp-figure mfp-with-anim");break;case"iframe":this.st.iframe.markup=this.st.iframe.markup.replace("mfp-iframe-scaler","mfp-iframe-scaler mfp-with-anim")}},change:function(){var a=this;this.isOpen&&(this.wrap.removeClass("mfp-ready"),setTimeout(function(){a.wrap.addClass("mfp-ready")},10))}}})},single_portfolio_gallery:function(e){var t=e.find(".single-portfolio-gallery-main"),l=e.find(".single-portfolio-gallery-thumb");t.owlCarousel({items:1,nav:!1,dots:!1,loop:!1,rtl:o,lazyLoad:i}).on("changed.owl.carousel",function(a){var e=a.item.index;l.find(".owl-item").removeClass("current").eq(e).addClass("current");var i=l.find(".owl-item.active").length-1,o=l.find(".owl-item.active").first().index();e>l.find(".owl-item.active").last().index()&&l.data("owl.carousel").to(e,100,!0),e<o&&l.data("owl.carousel").to(e-i,100,!0)}),l.on("initialized.owl.carousel",function(a){l.find(".owl-item").eq(0).addClass("current")}).owlCarousel({items:4,nav:!1,dots:!1,rtl:o,lazyLoad:i,margin:10,responsive:{992:{items:4},768:{items:3},0:{items:2}}}),l.on("click",".owl-item",function(e){if(e.preventDefault(),!a(this).hasClass("current")){var i=a(this).index();t.data("owl.carousel").to(i,300,!0)}}),a(document).on("reset_data",function(a){t.data("owl.carousel").to(0,300,!0)})}},a(document).ready(function(){G5_Portfolio.init()})}(jQuery);